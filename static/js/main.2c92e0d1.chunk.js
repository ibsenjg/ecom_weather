(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{71:function(n,e,t){},79:function(n,e,t){"use strict";t.r(e);var c=t(2),a=t(0),i=t.n(a),r=t(10),s=t.n(r),o=(t(71),t(22)),d=t.n(o),u=t(17),l=t(31),m=t(16),j=t(33),p=t(13),b=t(15),h=function(){var n=Object(l.a)(d.a.mark((function n(e){var t,c,a,i,r,s,o,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,c=e.name,n.next=3,fetch("https://vast-thicket-28360.herokuapp.com/graphql",{method:"POST",body:JSON.stringify({query:t}),headers:{"Content-type":"application/json"}});case 3:return a=n.sent,n.next=6,a.json();case 6:if(i=n.sent,r=i.errors,s=i.data,!r){n.next=12;break}throw o=Object(u.a)(r,1),l=o[0],new Error(l.message);case 12:if(200===a.status||201===a.status){n.next=14;break}throw new Error("Something Failed.");case 14:return n.abrupt("return",s[c]);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=t(26),x=t(121),f=t(122),y=t(120),v=t(114),g=t(43),w=Object(g.b)({name:"app",initialState:{cities:[],selectedDay:null,selectedCity:{}},reducers:{setDay:function(n,e){var t=e.payload;n.selectedDay=t},setCities:function(n,e){var t=e.payload;n.cities=t},setCity:function(n,e){var t=e.payload;n.selectedCity=t}}}),N=w.actions,_=N.setDay,k=N.setCities,C=N.setCity,I=w.reducer,S=Object(v.a)((function(){return{autocomplete:{width:"100% !important"},root:{"& >div":{backgroundColor:"white"},width:"100%",marginBottom:"1rem","& .Mui-focused fieldset":{borderColor:"#232323 !important"},"& .Mui-focused":{color:"#232323"}}}}));function M(){var n=Object(b.b)(),e=S(),t=Object(a.useState)(!1),i=Object(u.a)(t,2),r=i[0],s=i[1],o=Object(a.useState)([]),m=Object(u.a)(o,2),j=m[0],p=m[1],v=r&&0===j.length;Object(a.useEffect)((function(){var e=!0;if(v)return Object(l.a)(d.a.mark((function t(){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"\n      query {\n        cities {\n          _id\n          name\n          country\n          url\n          current {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n          week {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n        }\n      }",t.next=3,h({payload:"\n      query {\n        cities {\n          _id\n          name\n          country\n          url\n          current {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n          week {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n        }\n      }",name:"cities"});case 3:return c=t.sent,e&&p(c),t.abrupt("return",n(k(c)));case 6:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[v,n]),Object(a.useEffect)((function(){r||p([])}),[r]);return Object(c.jsx)(f.a,{onChange:function(e,t){t&&n(C(t))},open:r,onOpen:function(){s(!0)},onClose:function(){s(!1)},getOptionSelected:function(n,e){return n.name===e.name},getOptionLabel:function(n){return"".concat(n.name,", ").concat(n.country)},options:j,loading:v,classes:{root:e.autocomplete},renderInput:function(n){return Object(c.jsx)(x.a,Object(O.a)(Object(O.a)({},n),{},{classes:{root:e.root},placeholder:"Search city",variant:"outlined",InputProps:Object(O.a)(Object(O.a)({},n.InputProps),{},{endAdornment:Object(c.jsxs)(c.Fragment,{children:[v?Object(c.jsx)(y.a,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}})}var E=function(n){return new Date(n).toDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})},D=function(){var n=Object(b.c)((function(n){return n.app})).selectedCity,e=n&&n.current;return Object(c.jsxs)("header",{children:[Object(c.jsxs)("div",{className:"relative",children:[Object(c.jsx)("span",{className:"date",children:E(e?n.current.date:null)}),Object(c.jsx)("h1",{children:e?n.name:"Today"}),Object(c.jsx)("div",{className:"avatar",children:Object(c.jsx)("img",{className:"card-image",src:"https://avatars.githubusercontent.com/u/18384611?s=460&u=8ad3dc9582c6e27076bf90890551a2371d619a38&v=4",alt:"ibsen gitgub page profile"})})]}),Object(c.jsx)(M,{})]})};function q(n){var e=n.id,t=Object(b.b)(),i=Object(a.useState)({}),r=Object(u.a)(i,2),s=r[0],o=s._id,d=s.name,l=s.date,p=s.hourly,h=s.temp,O=s.min,x=s.max,f=r[1],y=Object(a.useState)(""),v=Object(u.a)(y,2),g=v[0],w=v[1],N=Object(a.useState)(!1),k=Object(u.a)(N,2),C=k[0],I=k[1],S=Object(b.c)((function(n){return n.app})).selectedCity;Object(a.useEffect)((function(){var n,t=S.week,c=S.url,a=S.current;(n=t.find((function(n){return n._id===e})))||(n=a),f(n),w(c),I(!0)}),[S,e]);return Object(c.jsx)(c.Fragment,{children:C&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.15}},transition:{duration:.2,delay:.15},style:{pointerEvents:"auto"},className:"overlay",onClick:function(){t(_(null))},children:Object(c.jsx)(j.b,{to:"/"})}),Object(c.jsx)("div",{className:"card-content-container open",children:Object(c.jsxs)(m.c.div,{className:"card-content",layoutId:"card-container-".concat(o),children:[Object(c.jsx)(m.c.div,{className:"card-image-container minimal",layoutId:"card-image-container-".concat(o),style:{background:"url(".concat(g,")")}}),Object(c.jsxs)(m.c.div,{className:"title-container",layoutId:"title-container-".concat(o),children:[Object(c.jsx)("span",{className:"category",children:E(l)}),Object(c.jsx)("h2",{children:d}),Object(c.jsx)("div",{className:"temp",children:"".concat(Math.round(h),"\xba")}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{className:"top",children:["max ","".concat(Math.round(x),"\xba")," /"]}),Object(c.jsxs)("span",{className:"top",children:[" min ","".concat(Math.round(O),"\xba")]})]})]}),Object(c.jsx)(m.c.div,{className:"content-container minimal",animate:!0,children:p&&p.map((function(n){var e=n._id,t=n.hour,a=n.temp,i=n.min,r=n.max;return Object(c.jsxs)("div",{className:"hour-row",children:[Object(c.jsxs)("h4",{children:["Hour: ",t]}),Object(c.jsxs)("h4",{children:["Temp ","".concat(Math.round(a),"\xba")]}),Object(c.jsxs)("h4",{children:["Max ","".concat(Math.round(r),"\xba")]}),Object(c.jsxs)("h4",{children:["Min ","".concat(Math.round(i),"\xba")]})]},e)}))})]})})]})})}var F=function(n){var e=n._id,t=n.img,a=n.name,i=n.date,r=n.temp,s=n.max,o=n.min,d=Object(b.b)();return Object(c.jsxs)("li",{className:"card",children:[Object(c.jsx)("div",{className:"card-content-container",children:Object(c.jsxs)(m.c.div,{className:"card-content",layoutId:"card-container-".concat(e),children:[Object(c.jsx)(m.c.div,{className:"card-image-container",layoutId:"card-image-container-".concat(e),style:{background:"url(".concat(t,")")}}),Object(c.jsxs)(m.c.div,{className:"title-container",layoutId:"title-container-".concat(e),children:[Object(c.jsx)("span",{className:"category",children:E(i)}),Object(c.jsx)("h2",{children:a}),Object(c.jsx)("div",{className:"temp",children:"".concat(Math.round(r),"\xba")}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{className:"top",children:["max ","".concat(Math.round(s),"\xba")," /"]}),Object(c.jsxs)("span",{className:"top",children:[" min ","".concat(Math.round(o),"\xba")]})]})]})]})}),e&&Object(c.jsx)(j.b,{to:e,className:"card-open-link",onClick:function(n){d(_(n))}.bind(undefined,e)})]})},P=function(n){var e=n._id,t=n.img,a=(n.name,n.date),i=n.temp,r=n.min,s=n.max;return Object(c.jsx)("li",{className:"card",children:Object(c.jsx)("div",{className:"card-content-container",children:Object(c.jsxs)(m.c.div,{className:"card-content",layoutId:"card-container-".concat(e),children:[Object(c.jsx)(m.c.div,{className:"card-image-container",layoutId:"card-image-container-".concat(e),style:{background:"url(".concat(t,")")}}),Object(c.jsxs)(m.c.div,{className:"title-container",layoutId:"title-container-".concat(e),children:[Object(c.jsx)("span",{className:"category",children:E(a)}),Object(c.jsx)("h2",{children:"Current time"}),Object(c.jsx)("div",{className:"temp",children:"".concat(Math.round(i),"\xba")}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{className:"top",children:["max ","".concat(Math.round(s),"\xba")," /"]}),Object(c.jsxs)("span",{className:"top",children:[" min ","".concat(Math.round(r),"\xba")]})]})]})]})})})},J=function(n){var e=n.selectedId,t=Object(a.useState)([]),i=Object(u.a)(t,2),r=i[0],s=i[1],o=Object(a.useState)([]),d=Object(u.a)(o,2),l=d[0],m=d[1],j=Object(a.useState)(""),p=Object(u.a)(j,2),h=p[0],x=p[1],f=Object(b.c)((function(n){return n.app})).selectedCity;return Object(a.useEffect)((function(){if(f){var n=f.current,e=f.week,t=f.url;s(e),m(n),x(t)}}),[f]),Object(c.jsx)("ul",{className:"card-list",children:Object(c.jsxs)(c.Fragment,{children:[l&&Object(c.jsx)(P,Object(O.a)(Object(O.a)({},l),{},{img:h,isSelected:l._id===e})),r&&r.map((function(n){return Object(c.jsx)(F,Object(O.a)(Object(O.a)({img:h},n),{},{isSelected:n._id===e}),n._id)}))]})})},T=function(){var n=Object(b.c)((function(n){return n.app})).selectedDay;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(J,{selectedId:n}),Object(c.jsx)(m.a,{children:n&&Object(c.jsx)(q,{id:n})})]})},A=function(){var n=Object(b.b)(),e=Object(b.c)((function(n){return n.app})).selectedCity._id;return Object(a.useEffect)((function(){Object(l.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n      query {\n        cities {\n          _id\n          name\n          country\n          url\n          current {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n          week {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n        }\n      }",e.next=3,h({payload:"\n      query {\n        cities {\n          _id\n          name\n          country\n          url\n          current {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n          week {\n            _id\n            name\n            main\n            date\n            description\n            icon\n            feels\n            clouds\n            temp\n            min\n            max\n            pressure\n            humidity\n            wind\n            rain\n            uvi\n            hourly {\n              _id\n              main\n              hour\n              description\n              icon\n              feels\n              temp\n              min\n              max\n            }\n          }\n        }\n      }",name:"cities"});case 3:return t=e.sent,c=Object(u.a)(t,1),a=c[0],n(C(a)),e.abrupt("return",n(k(t)));case 7:case"end":return e.stop()}}),e)})))()}),[n]),Object(a.useEffect)((function(){var t=setInterval(Object(l.a)(d.a.mark((function t(){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c='\n    mutation {\n      updateCity(id:"'.concat(e,'") {\n        _id\n        name\n        country\n        url\n        current {\n          _id\n          name\n          main\n          date\n          description\n          icon\n          feels\n          clouds\n          temp\n          min\n          max\n          pressure\n          humidity\n          wind\n          rain\n          uvi\n          hourly {\n            _id\n            main\n            hour\n            description\n            icon\n            feels\n            temp\n            min\n            max\n          }\n        }\n        week {\n          _id\n          name\n          main\n          date\n          description\n          icon\n          feels\n          clouds\n          temp\n          min\n          max\n          pressure\n          humidity\n          wind\n          rain\n          uvi\n          hourly {\n            _id\n            main\n            hour\n            description\n            icon\n            feels\n            temp\n            min\n            max\n          }\n        }\n      }\n    }'),t.next=3,h({payload:c,name:"updateCity"});case 3:a=t.sent,n(C(a));case 5:case"end":return t.stop()}}),t)}))),6e4);return function(){return clearInterval(t)}}),[e,n]),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)(m.b,{type:"crossfade",children:[Object(c.jsx)(D,{}),Object(c.jsx)(j.a,{children:Object(c.jsx)(p.a,{path:["/:id","/"],component:T})})]})})},B=Object(g.a)({reducer:{app:I}});s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(b.a,{store:B,children:Object(c.jsx)(A,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.2c92e0d1.chunk.js.map